<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-03-02">

<title>ISSS608 - Dunhumby EDA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-PKMQ2W4ZRC"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-PKMQ2W4ZRC', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  });
});
</script> 
  


<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">ISSS608</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercises1-6" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercises[1-6]</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercises1-6">    
        <li>
    <a class="dropdown-item" href="../handsOn_ex1.html">
 <span class="dropdown-text">Ex[1] DataVis with ggplot2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex2.html">
 <span class="dropdown-text">Ex[2] DataVis with Advanced ggplot2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex3.1.html">
 <span class="dropdown-text">Ex[3.1] Programming Interactive Visualisation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex3.2.html">
 <span class="dropdown-text">Ex[3.2] Programming Animation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex3.3.html">
 <span class="dropdown-text">Ex[3.3] Visualise Large Data Interactively</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex4.1.html">
 <span class="dropdown-text">Ex[4.1] Visual Statistical Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex4.2.html">
 <span class="dropdown-text">Ex[4.2] Visualise Models</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex4.3.html">
 <span class="dropdown-text">Ex[4.3] Visualising Uncertainty</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex4.4.html">
 <span class="dropdown-text">Ex[4.4] Create Funnel Plot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex5.1.html">
 <span class="dropdown-text">Ex[5.1] Create Ternary Plot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex5.2.html">
 <span class="dropdown-text">Ex[5.2] Visualise Correlation Matrices</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex5.3.html">
 <span class="dropdown-text">Ex[5.3] Create Heatmap</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex5.4.qm">
 <span class="dropdown-text">Ex[5.4] Create Parallel Coordinates Plot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex6.1.html">
 <span class="dropdown-text">Ex[6.1] Create Calendar Heatmap</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex6.2.html">
 <span class="dropdown-text">Ex[6.2] Create Cycle Plot</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercises7-10" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercises[7-10]</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercises7-10">    
        <li>
    <a class="dropdown-item" href="../handsOn_ex7.1.html">
 <span class="dropdown-text">Ex[7.1] Choropleth Mapping</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex7.2.html">
 <span class="dropdown-text">Ex[7.2] Visualise Geospatial Points</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex7.3.html">
 <span class="dropdown-text">Ex[7.3] Analytical Mapping</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../handsOn_ex8.html">
 <span class="dropdown-text">Ex[8] Modelling, Visualising &amp; Analysing Network Data</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-in-class-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">In-class Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-in-class-exercises">    
        <li>
    <a class="dropdown-item" href="https://public.tableau.com/shared/5GXCKXPQD?:display_count=n&amp;:origin=viz_share_link">
 <span class="dropdown-text">Ex[1] S &amp; P Summary with Tableau</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../inClass/inClass_ex03/inClass_ex3.html">
 <span class="dropdown-text">Ex[3] Programming Interactive Data Visualisation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../inClass/inClass_ex04/inClass_ex4.html">
 <span class="dropdown-text">Ex[4] Programming Interactive Data Visualisation 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../inClass/inClass_ex05/inClass_ex5.html">
 <span class="dropdown-text">Ex[5] Visualise Correlation Matrices</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../inClass/inClass_ex06/inClass_ex6.html">
 <span class="dropdown-text">Ex[6] Visualise Time-series Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../inClass/inClass_ex07/inClass_ex7.html">
 <span class="dropdown-text">Ex[7] Visualise Geospatial Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../inClass/inClass_ex08/inClass_ex8.html">
 <span class="dropdown-text">Ex[8] Network Data Visualisation &amp; Analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Take-home Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercises">    
        <li>
    <a class="dropdown-item" href="../takeHome/th_ex1/th_ex1.html">
 <span class="dropdown-text">Ex[1] Trellis Population Pyramids</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../takeHome/th_ex2/th_ex2.html">
 <span class="dropdown-text">Ex[2] DataViz Makeover for Trellis Population Pyramids</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../takeHome/th_ex3/th_ex3.html">
 <span class="dropdown-text">Ex[3] Resale Prices for Singapore Public Housing Property</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../takeHome/th_ex4/th_ex4.html">
 <span class="dropdown-text">Ex[4.1] Singapore Merchandise Trade from 2020 to 2022</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../takeHome/th_ex4/th_ex4.2.html">
 <span class="dropdown-text">Ex[4.2] Singapore Merchandise Trade Financial Year 2019 to 2022</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-workshop--notes" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Workshop &amp; Notes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-workshop--notes">    
        <li>
    <a class="dropdown-item" href="../pnote/bsw_3.html">
 <span class="dropdown-text">BSWorkshop - Programming Statistical Graphics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/bsw_4.html">
 <span class="dropdown-text">BSWorkshop - Build Statistical Model</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/bsw_5.html">
 <span class="dropdown-text">BSWorkshop - Build Predictive Model</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/bsw_6.html">
 <span class="dropdown-text">BSWorkshop - Finance Data Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://tskam.shinyapps.io/prototype-ShinyIDEA/">
 <span class="dropdown-text">Shiny Workshop - Prof’s Prototype</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/test0.html">
 <span class="dropdown-text">Exploration 0 - Explore with Geospatial Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/test1.html">
 <span class="dropdown-text">Exploration 1 - Pareto Chart</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/test2.html">
 <span class="dropdown-text">Exploration 2 - Pyramid &amp; Other Charts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/test3.html">
 <span class="dropdown-text">Exploration 3 - Interactive &amp; Animated Pyramid Chart</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/test4.html">
 <span class="dropdown-text">Exploration 4 - Interactive Heatmap Chart</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/test5.html">
 <span class="dropdown-text">Exploration 5 - Time-Series Visualisation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/test7.html">
 <span class="dropdown-text">Exploration 7 - Marketing &amp; Retail Visual Analytics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/note1.html">
 <span class="dropdown-text">Personal Note</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pnote/tableauNote.html">
 <span class="dropdown-text">Tableau Note</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">Profile</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#r-package-required" id="toc-r-package-required" class="nav-link active" data-scroll-target="#r-package-required"><strong>1. R PACKAGE REQUIRED</strong></a>
  <ul class="collapse">
  <li><a href="#load-r-packages" id="toc-load-r-packages" class="nav-link" data-scroll-target="#load-r-packages"><strong>1.1 Load R Packages</strong></a></li>
  </ul></li>
  <li><a href="#data-processing-preparation" id="toc-data-processing-preparation" class="nav-link" data-scroll-target="#data-processing-preparation"><strong>2. DATA PROCESSING &amp; PREPARATION</strong></a>
  <ul class="collapse">
  <li><a href="#import-data" id="toc-import-data" class="nav-link" data-scroll-target="#import-data"><strong>2.1 Import Data</strong></a>
  <ul class="collapse">
  <li><a href="#campaign_desc" id="toc-campaign_desc" class="nav-link" data-scroll-target="#campaign_desc">2.1.1 campaign_desc</a></li>
  <li><a href="#campaign_table" id="toc-campaign_table" class="nav-link" data-scroll-target="#campaign_table">2.1.2 campaign_table</a></li>
  <li><a href="#causal_data" id="toc-causal_data" class="nav-link" data-scroll-target="#causal_data">2.1.3 causal_data</a></li>
  <li><a href="#coupon" id="toc-coupon" class="nav-link" data-scroll-target="#coupon">2.1.4 coupon</a></li>
  <li><a href="#coupon_redempt" id="toc-coupon_redempt" class="nav-link" data-scroll-target="#coupon_redempt">2.1.5 coupon_redempt</a></li>
  <li><a href="#hh_demographic" id="toc-hh_demographic" class="nav-link" data-scroll-target="#hh_demographic">2.1.6 hh_demographic</a></li>
  <li><a href="#product" id="toc-product" class="nav-link" data-scroll-target="#product">2.1.7 product</a></li>
  <li><a href="#transaction_data" id="toc-transaction_data" class="nav-link" data-scroll-target="#transaction_data">2.1.8 transaction_data</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#data-prep" id="toc-data-prep" class="nav-link" data-scroll-target="#data-prep">3. DATA PREP</a>
  <ul class="collapse">
  <li><a href="#group-transaction-data-by-household_key" id="toc-group-transaction-data-by-household_key" class="nav-link" data-scroll-target="#group-transaction-data-by-household_key">3.1 Group transaction data by household_key</a></li>
  <li><a href="#merge-tables" id="toc-merge-tables" class="nav-link" data-scroll-target="#merge-tables">3.2 Merge Tables</a>
  <ul class="collapse">
  <li><a href="#demographic-trans1.1" id="toc-demographic-trans1.1" class="nav-link" data-scroll-target="#demographic-trans1.1">3.2.1 demographic &amp; trans1.1</a></li>
  <li><a href="#campaign_table-campaign_desc" id="toc-campaign_table-campaign_desc" class="nav-link" data-scroll-target="#campaign_table-campaign_desc">3.2.2 campaign_table &amp; campaign_desc</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#correlation-analysis" id="toc-correlation-analysis" class="nav-link" data-scroll-target="#correlation-analysis">4. CORRELATION ANALYSIS</a>
  <ul class="collapse">
  <li><a href="#set-household_key-as-the-row-id" id="toc-set-household_key-as-the-row-id" class="nav-link" data-scroll-target="#set-household_key-as-the-row-id">4.1 Set household_key as the row id</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Dunhumby EDA</h1>
<p class="subtitle lead">From</p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 2, 2023</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">March 17, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="r-package-required" class="level1">
<h1><strong>1. R PACKAGE REQUIRED</strong></h1>
<p>The following are the packages required for this exercise :</p>
<section id="load-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="load-r-packages"><strong>1.1 Load R Packages</strong></h2>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(readxl, ggHoriPlot, ggthemes, ggpubr, ggiraph, lubridate, tidyverse, data.table, plotly, viridis, hrbrthemes, CGPfunctions, ggrepel, corrplot, corrr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="data-processing-preparation" class="level1">
<h1><strong>2. DATA PROCESSING &amp; PREPARATION</strong></h1>
<section id="import-data" class="level2">
<h2 class="anchored" data-anchor-id="import-data"><strong>2.1 Import Data</strong></h2>
<section id="campaign_desc" class="level3">
<h3 class="anchored" data-anchor-id="campaign_desc">2.1.1 campaign_desc</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>campaign_desc <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/campaign_desc.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(campaign_desc, <span class="dv">70</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 30
Columns: 4
$ DESCRIPTION &lt;chr&gt; "TypeB", "TypeC", "TypeB", "TypeC", "TypeB", "Ty…
$ CAMPAIGN    &lt;dbl&gt; 24, 15, 25, 20, 23, 21, 22, 18, 19, 17, 14, 16, …
$ START_DAY   &lt;dbl&gt; 659, 547, 659, 615, 646, 624, 624, 587, 603, 575…
$ END_DAY     &lt;dbl&gt; 719, 708, 691, 685, 684, 656, 656, 642, 635, 607…</code></pre>
</div>
</div>
<p>Remarks :</p>
<p>This table gives the length of time for which a campaign runs.</p>
<p>So, any coupons received as part of a campaign are valid within the dates contained in this table.</p>
</section>
<section id="campaign_table" class="level3">
<h3 class="anchored" data-anchor-id="campaign_table">2.1.2 campaign_table</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>campaign_table <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/campaign_table.csv"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(campaign_table, <span class="dv">70</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 7,208
Columns: 3
$ DESCRIPTION   &lt;chr&gt; "TypeA", "TypeA", "TypeA", "TypeA", "TypeA", "…
$ household_key &lt;dbl&gt; 17, 27, 212, 208, 192, 187, 183, 142, 140, 134…
$ CAMPAIGN      &lt;dbl&gt; 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26…</code></pre>
</div>
</div>
<p>Remarks :</p>
<p>This table lists the campaigns received by each household in the study.</p>
<p>Each household received a different set of campaigns.</p>
</section>
<section id="causal_data" class="level3">
<h3 class="anchored" data-anchor-id="causal_data">2.1.3 causal_data</h3>
<p>The file is too large to push over to Github. So, I have to split the datasets to keep each dataset less than 100 MB.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>causal_1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3000000</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_1,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_1.rds"</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>causal_2 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">3000001</span><span class="sc">:</span><span class="dv">6000000</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_2,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_2.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>causal_3 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">6000001</span><span class="sc">:</span><span class="dv">9000000</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_3,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_3.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>causal_4 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">9000001</span><span class="sc">:</span><span class="dv">12000000</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_4,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_4.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>causal_5 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">12000001</span><span class="sc">:</span><span class="dv">15000000</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_5,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_5.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>causal_6 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">15000001</span><span class="sc">:</span><span class="dv">18000000</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_6,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_6.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>causal_7 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">18000001</span><span class="sc">:</span><span class="dv">21000000</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_7,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_7.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>causal_8 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">21000001</span><span class="sc">:</span><span class="dv">24000000</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_8,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_8.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>causal_9 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">24000001</span><span class="sc">:</span><span class="dv">27000000</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_9,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_9.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>causal_10 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">27000001</span><span class="sc">:</span><span class="dv">30000000</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_10,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_10.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>causal_11 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">30000001</span><span class="sc">:</span><span class="dv">33000000</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_11,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_11.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>causal_12 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">33000001</span><span class="sc">:</span><span class="dv">36000000</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_12,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_12.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>causal_13 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/causal_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">36000001</span><span class="sc">:</span><span class="dv">36786524</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(causal_13,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/causal_13.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>causal_1 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_1.rds"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>causal_2 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_2.rds"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>causal_3 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_3.rds"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>causal_4 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_4.rds"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>causal_5 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_5.rds"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>causal_6 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_6.rds"</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>causal_7 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_7.rds"</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>causal_8 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_8.rds"</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>causal_9 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_9.rds"</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>causal_10 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_10.rds"</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>causal_11 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_11.rds"</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>causal_12 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_12.rds"</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>causal_13 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/causal_13.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Remarks :</p>
<p>This table signifies whether a given product was featured in the weekly mailer or was part of an in-store display (other than regular product placement).</p>
</section>
<section id="coupon" class="level3">
<h3 class="anchored" data-anchor-id="coupon">2.1.4 coupon</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>coupon <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/coupon.csv"</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(coupon, <span class="dv">70</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 124,548
Columns: 3
$ COUPON_UPC &lt;dbl&gt; 10000089061, 10000089064, 10000089073, 5180000905…
$ PRODUCT_ID &lt;dbl&gt; 27160, 27754, 28897, 28919, 28929, 28929, 28929, …
$ CAMPAIGN   &lt;dbl&gt; 4, 9, 12, 28, 25, 22, 9, 28, 1, 25, 22, 9, 28, 1,…</code></pre>
</div>
</div>
<p>Remarks :</p>
<p>This table lists all the coupons sent to customers as part of a campaign, as well as the products for which each coupon is redeemable.</p>
<ul>
<li><p>Some coupons are redeemable for multiple products.</p>
<ul>
<li>One example is a coupon for any private label frozen vegetable. There are a large number of products where this coupon could be redeemed.</li>
</ul></li>
<li><p>For campaign Type A, this table provides the pool of possible coupons. Each customer participating in a TypeA campaign received 16 coupons out of the pool. The 16 coupons were selected based on the customer’s prior purchase behavior. Identifying the specific 16 coupons that each customer received is outside the scope of this database.</p></li>
<li><p>For campaign TypeB and TypeC, all customers participating in a campaign receives all coupons pertaining to that campaign.</p></li>
</ul>
</section>
<section id="coupon_redempt" class="level3">
<h3 class="anchored" data-anchor-id="coupon_redempt">2.1.5 coupon_redempt</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>coupon_redempt <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/coupon_redempt.csv"</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(coupon_redempt, <span class="dv">70</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,318
Columns: 4
$ household_key &lt;dbl&gt; 1, 1, 1, 1, 1, 8, 13, 13, 13, 13, 13, 13, 13, …
$ DAY           &lt;dbl&gt; 421, 421, 427, 597, 597, 422, 396, 424, 434, 4…
$ COUPON_UPC    &lt;dbl&gt; 10000085364, 51700010076, 54200000033, 1000008…
$ CAMPAIGN      &lt;dbl&gt; 8, 8, 8, 18, 18, 8, 5, 8, 8, 8, 11, 10, 13, 11…</code></pre>
</div>
</div>
<p>Remarks :</p>
<p>This table identifies the coupons that each household redeemed.</p>
</section>
<section id="hh_demographic" class="level3">
<h3 class="anchored" data-anchor-id="hh_demographic">2.1.6 hh_demographic</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>demographic <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/hh_demographic.csv"</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(demographic, <span class="dv">70</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 801
Columns: 8
$ AGE_DESC            &lt;chr&gt; "65+", "45-54", "25-34", "25-34", "45-54…
$ MARITAL_STATUS_CODE &lt;chr&gt; "A", "A", "U", "U", "B", "B", "A", "B", …
$ INCOME_DESC         &lt;chr&gt; "35-49K", "50-74K", "25-34K", "75-99K", …
$ HOMEOWNER_DESC      &lt;chr&gt; "Homeowner", "Homeowner", "Unknown", "Ho…
$ HH_COMP_DESC        &lt;chr&gt; "2 Adults No Kids", "2 Adults No Kids", …
$ HOUSEHOLD_SIZE_DESC &lt;chr&gt; "2", "2", "3", "4", "1", "2", "2", "1", …
$ KID_CATEGORY_DESC   &lt;chr&gt; "None/Unknown", "None/Unknown", "1", "2"…
$ household_key       &lt;dbl&gt; 1, 7, 8, 13, 16, 17, 18, 19, 20, 22, 25,…</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>questionr<span class="sc">::</span><span class="fu">freq</span>(<span class="fu">duplicated</span>(demographic<span class="sc">$</span>household_key))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        n   % val%
FALSE 801 100  100</code></pre>
</div>
</div>
<p>Remarks :</p>
<ul>
<li><p>No duplication in household_key.</p></li>
<li><p>Only 801 households demographic data available.</p></li>
</ul>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(demographic<span class="sc">$</span>AGE_DESC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "65+"   "45-54" "25-34" "35-44" "19-24" "55-64"</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(demographic<span class="sc">$</span>MARITAL_STATUS_CODE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "U" "B"</code></pre>
</div>
</div>
</section>
<section id="product" class="level3">
<h3 class="anchored" data-anchor-id="product">2.1.7 product</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>product <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/product.csv"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(product, <span class="dv">70</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 92,353
Columns: 7
$ PRODUCT_ID           &lt;dbl&gt; 25671, 26081, 26093, 26190, 26355, 2642…
$ MANUFACTURER         &lt;dbl&gt; 2, 2, 69, 69, 69, 69, 69, 69, 69, 16, 6…
$ DEPARTMENT           &lt;chr&gt; "GROCERY", "MISC. TRANS.", "PASTRY", "G…
$ BRAND                &lt;chr&gt; "National", "National", "Private", "Pri…
$ COMMODITY_DESC       &lt;chr&gt; "FRZN ICE", "NO COMMODITY DESCRIPTION",…
$ SUB_COMMODITY_DESC   &lt;chr&gt; "ICE - CRUSHED/CUBED", "NO SUBCOMMODITY…
$ CURR_SIZE_OF_PRODUCT &lt;chr&gt; "22 LB", NA, NA, "50 OZ", "14 OZ", "2.5…</code></pre>
</div>
</div>
<p>Remarks :</p>
<p>This table contains information on each product sold such as type of product, national or private label and a brand identifier.</p>
<p>!!!!! Which Manufacturers to source for supplies that give highest profit after drive by campaign.</p>
</section>
<section id="transaction_data" class="level3">
<h3 class="anchored" data-anchor-id="transaction_data">2.1.8 transaction_data</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>transaction_1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/transaction_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000000</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(transaction_1,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/transaction_1.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>transaction_2 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/transaction_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1000001</span><span class="sc">:</span><span class="dv">2000000</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(transaction_2,</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/transaction_2.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>transaction_3 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data2/transaction_data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STORE_ID) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">2000001</span><span class="sc">:</span><span class="dv">2595732</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(transaction_3,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"data2/transaction_3.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>transaction_1 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/transaction_1.rds"</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>transaction_2 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/transaction_2.rds"</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>transaction_3 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data2/transaction_3.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
</section>
<section id="data-prep" class="level1">
<h1>3. DATA PREP</h1>
<section id="group-transaction-data-by-household_key" class="level2">
<h2 class="anchored" data-anchor-id="group-transaction-data-by-household_key">3.1 Group transaction data by household_key</h2>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>trans_1 <span class="ot">&lt;-</span> transaction_1 <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(household_key) <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">totalSales =</span> <span class="fu">sum</span>(SALES_VALUE), </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">totalDisc =</span> <span class="fu">sum</span>(RETAIL_DISC)) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sales =</span> totalSales <span class="sc">+</span> totalDisc)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>trans_2 <span class="ot">&lt;-</span> transaction_2 <span class="sc">%&gt;%</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(household_key) <span class="sc">%&gt;%</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">totalSales =</span> <span class="fu">sum</span>(SALES_VALUE), </span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">totalDisc =</span> <span class="fu">sum</span>(RETAIL_DISC)) <span class="sc">%&gt;%</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sales =</span> totalSales <span class="sc">+</span> totalDisc)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>trans_3 <span class="ot">&lt;-</span> transaction_3 <span class="sc">%&gt;%</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(household_key) <span class="sc">%&gt;%</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">totalSales =</span> <span class="fu">sum</span>(SALES_VALUE), </span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">totalDisc =</span> <span class="fu">sum</span>(RETAIL_DISC)) <span class="sc">%&gt;%</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sales =</span> totalSales <span class="sc">+</span> totalDisc)</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>trans <span class="ot">&lt;-</span> <span class="fu">merge</span>(trans_1, trans_2, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>trans1 <span class="ot">&lt;-</span> <span class="fu">merge</span>(trans, trans_3, <span class="at">all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Remarks :</p>
<p>Only 801 households demographic data available.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>trans1<span class="fl">.1</span> <span class="ot">&lt;-</span> trans1 <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(household_key) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">totalSales1 =</span> <span class="fu">sum</span>(totalSales), </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">totalDisc1 =</span> <span class="fu">sum</span>(totalDisc)) <span class="sc">%&gt;%</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sales1 =</span> totalSales1 <span class="sc">+</span> totalDisc1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="merge-tables" class="level2">
<h2 class="anchored" data-anchor-id="merge-tables">3.2 Merge Tables</h2>
<section id="demographic-trans1.1" class="level3">
<h3 class="anchored" data-anchor-id="demographic-trans1.1">3.2.1 demographic &amp; trans1.1</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>demogTrans <span class="ot">&lt;-</span> demographic <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(trans1<span class="fl">.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="campaign_table-campaign_desc" class="level3">
<h3 class="anchored" data-anchor-id="campaign_table-campaign_desc">3.2.2 campaign_table &amp; campaign_desc</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>campaigns <span class="ot">&lt;-</span> campaign_table <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(campaign_desc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>campaigns_1 <span class="ot">&lt;-</span> campaigns <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(coupon_redempt) <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(COUPON_UPC) <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">day_response =</span> (DAY <span class="sc">-</span> START_DAY)<span class="sc">+</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duration =</span> (END_DAY <span class="sc">-</span> START_DAY)<span class="sc">+</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>campaigns_hh <span class="ot">&lt;-</span> campaigns_1 <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  plyr<span class="sc">::</span><span class="fu">join_all</span>(<span class="fu">list</span>(transaction_1, transaction_2, transaction_3), </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">by =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">DAY</span><span class="st">`</span>, <span class="st">`</span><span class="at">household_key</span><span class="st">`</span>), </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type =</span> <span class="st">"left"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
</section>
<section id="correlation-analysis" class="level1">
<h1>4. CORRELATION ANALYSIS</h1>
<section id="set-household_key-as-the-row-id" class="level2">
<h2 class="anchored" data-anchor-id="set-household_key-as-the-row-id">4.1 Set household_key as the row id</h2>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>cluster_vars <span class="ot">&lt;-</span> <span class="fu">column_to_rownames</span>(demogTrans,</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">var =</span> <span class="st">'household_key'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>cluster_vars <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sales, AGE_DESC, MARITAL_STATUS_CODE, HOUSEHOLD_SIZE_DESC) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">correlate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Build Regression Model</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>model_test <span class="ot">&lt;-</span> <span class="fu">lm</span>(sales1 <span class="sc">~</span> AGE_DESC <span class="sc">+</span> HOMEOWNER_DESC <span class="sc">+</span> HOUSEHOLD_SIZE_DESC,</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> cluster_vars)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = sales1 ~ AGE_DESC + HOMEOWNER_DESC + HOUSEHOLD_SIZE_DESC, 
    data = cluster_vars)

Residuals:
    Min      1Q  Median      3Q     Max 
-5245.5 -2204.9  -650.8  1391.4 19885.0 

Coefficients:
                              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                     4342.5      552.1   7.866 1.21e-14 ***
AGE_DESC25-34                    414.3      549.8   0.754 0.451340    
AGE_DESC35-44                   1000.7      535.5   1.869 0.062030 .  
AGE_DESC45-54                    502.3      519.4   0.967 0.333863    
AGE_DESC55-64                   -163.6      643.4  -0.254 0.799378    
AGE_DESC65+                     -774.9      622.9  -1.244 0.213901    
HOMEOWNER_DESCProbable Owner   -1230.8      982.4  -1.253 0.210645    
HOMEOWNER_DESCProbable Renter  -1083.4      995.8  -1.088 0.276939    
HOMEOWNER_DESCRenter            -508.5      524.8  -0.969 0.332838    
HOMEOWNER_DESCUnknown           -938.0      282.6  -3.319 0.000943 ***
HOUSEHOLD_SIZE_DESC2             192.4      289.4   0.665 0.506349    
HOUSEHOLD_SIZE_DESC3             422.0      382.1   1.104 0.269746    
HOUSEHOLD_SIZE_DESC4             678.7      506.6   1.340 0.180780    
HOUSEHOLD_SIZE_DESC5+            698.7      469.1   1.489 0.136792    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3203 on 787 degrees of freedom
  (1699 observations deleted due to missingness)
Multiple R-squared:  0.05401,   Adjusted R-squared:  0.03839 
F-statistic: 3.456 on 13 and 787 DF,  p-value: 3.067e-05</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>cluster_vars <span class="ot">&lt;-</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>wp_stdMM <span class="ot">&lt;-</span> <span class="fu">normalize</span>(cluster_varsNF1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center"><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
  </div>
</footer>



</body></html>